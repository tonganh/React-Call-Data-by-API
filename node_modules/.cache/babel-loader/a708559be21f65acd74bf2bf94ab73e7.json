{"ast":null,"code":"var _jsxFileName = \"/home/tonganh/intern/React/react-api/src/App.js\";\nimport React, { useEffect, useState } from 'react';\nimport UserTable from './UserTable';\nimport AddUserForm from './AddUserForm';\nimport EditUserForm from './EditUserForm';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\nconst api = axios.create({\n  baseURL: `https://5d69d9fd6b97ef00145b7643.mockapi.io/api`\n});\n\nconst App = () => {\n  const [data, setData] = useState([]); // useEffect( async ()=>{\n  //     const res=await api.get(\"./users\")\n  //     setData(res)\n  // },[])\n\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    async function fetchData() {\n      const res = await api.get(\"/users\");\n      setUsers(res.data);\n    }\n\n    fetchData();\n  }, []);\n  const [editing, setEditing] = useState(false);\n  const intialFormState = {\n    id: '',\n    name: '',\n    email: '',\n    phone: ''\n  }; // Mang trang thai hien tai??\n\n  const [currentUser, setCurrentUser] = useState(intialFormState); // Cai nay cho chuc nang edit\n\n  const editRow = user => {\n    setEditing(true);\n    setCurrentUser({\n      id: user.id,\n      name: user.name,\n      email: user.email,\n      phone: user.phone\n    });\n  }; // const [users, setUsers] = useState(data)\n\n\n  const addUser = user => {\n    user.id = users.length + 1;\n    setUsers([...users, user]);\n  };\n\n  const deleteUser = id => {\n    setUsers(users.filter(user => user.id !== id)); // User duyet lai mang sao cho khong co phan tu id now. Tao ra mang moi. Well 1 cach de xoa phan tu.\n  };\n\n  const updateUser = (id, updateUser) => {\n    setEditing(false);\n    setUsers(users.map(user => user.id === id ? updateUser : user));\n  };\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    let errorList = [];\n\n    if (newData.name == '') {\n      errorList.push('Please enter name');\n    }\n\n    if (newData.phone == '') {\n      errorList.push('Please enter phone number');\n    }\n\n    if (newData.email == '') {\n      errorList.push('Please enter valid email');\n    }\n\n    if (errorList.length < 1) {\n      api.put(\"/users/\" + newData.id, newData);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container parrent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, \"CRUD App with Hooks\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, editing ?\n  /*#__PURE__*/\n  //Return true ->  cho phep edit \n  React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, \"Edit user\"), /*#__PURE__*/React.createElement(EditUserForm, {\n    setEditing: setEditing,\n    currentUser: currentUser,\n    updateUser: updateUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  }, \"Add user\"), /*#__PURE__*/React.createElement(AddUserForm, {\n    addUser: addUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"View users\"), /*#__PURE__*/React.createElement(UserTable, {\n    users: users,\n    deleteUser: deleteUser,\n    editRow: editRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/tonganh/intern/React/react-api/src/App.js"],"names":["React","useEffect","useState","UserTable","AddUserForm","EditUserForm","axios","api","create","baseURL","App","data","setData","users","setUsers","fetchData","res","get","editing","setEditing","intialFormState","id","name","email","phone","currentUser","setCurrentUser","editRow","user","addUser","length","deleteUser","filter","updateUser","map","handleRowUpdate","newData","oldData","resolve","errorList","push","put"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport UserTable from './UserTable'\nimport AddUserForm from './AddUserForm'\nimport EditUserForm from './EditUserForm'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport axios from 'axios'\n\nconst api = axios.create({\n    baseURL: `https://5d69d9fd6b97ef00145b7643.mockapi.io/api`\n})\nconst App = () => {\n    const [data, setData] = useState([]);\n    // useEffect( async ()=>{\n    //     const res=await api.get(\"./users\")\n    //     setData(res)\n    // },[])\n    const [users, setUsers] = useState([])\n    useEffect(() => {\n        async function fetchData() {\n            const res = await api.get(\"/users\")\n            setUsers(res.data)\n        }\n        fetchData()\n    }, [])\n\n    const [editing, setEditing] = useState(false)\n    const intialFormState = { id: '', name: '', email: '', phone: '' }\n    // Mang trang thai hien tai??\n    const [currentUser, setCurrentUser] = useState(intialFormState)\n    // Cai nay cho chuc nang edit\n    const editRow = (user) => {\n        setEditing(true)\n        setCurrentUser({ id: user.id, name: user.name, email: user.email, phone: user.phone })\n    }\n    // const [users, setUsers] = useState(data)\n    const addUser = (user) => {\n        user.id = users.length + 1\n        setUsers([...users, user])\n    }\n    const deleteUser = (id) => {\n        setUsers(users.filter((user) => user.id !== id))\n        // User duyet lai mang sao cho khong co phan tu id now. Tao ra mang moi. Well 1 cach de xoa phan tu.\n    }\n    const updateUser = (id, updateUser) => {\n        setEditing(false)\n        setUsers(users.map((user) => (user.id === id ? updateUser : user)))\n    }\n    const handleRowUpdate=(newData,oldData,resolve)=>{\n        let errorList=[]\n        if(newData.name=='')\n        {\n            errorList.push('Please enter name')\n        }\n        if(newData.phone=='')\n        {\n            errorList.push('Please enter phone number')\n        }\n        if(newData.email=='')\n        {\n            errorList.push('Please enter valid email')\n        }\n        if(errorList.length<1)\n        {\n            api.put(\"/users/\"+newData.id,newData)\n        }\n    }\n    return (\n        <div className=\"container parrent\">\n            <h1 className=\"text-center\">CRUD App with Hooks</h1>\n            <div className=\"flex-row\">\n                <div className=\"flex-sm\">\n                    {editing ? (\n                        //Return true ->  cho phep edit \n                        <div>\n                            <h2>Edit user</h2>\n                            <EditUserForm setEditing={setEditing} currentUser={currentUser} updateUser={updateUser} />\n                        </div>\n                    ) : (\n                            <div>\n                                <h2>\n                                    Add user\n                            </h2>\n                                <AddUserForm addUser={addUser} />\n                            </div>\n                        )\n                    }\n                </div>\n                <div className=\"flex-large\">\n                    <h2>View users</h2>\n                    {/* Phan bang mac dinh */}\n                    <UserTable users={users} deleteUser={deleteUser} editRow={editRow} />\n                    {/* users o day chinh la mang cac phan tu hien tai.\n                        deleteUser, editUSer la cac ham se can chay tuong\n                        \n                    */}\n                </div>\n\n            </div>\n\n        </div >\n    )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}